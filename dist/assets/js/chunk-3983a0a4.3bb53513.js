(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3983a0a4"],{c64d:function(t,e,s){"use strict";s("ec55")},cbde:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Row",[s("Col",{attrs:{span:"24"}},[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"md-settings"}}),t._v("\n                    基础设置\n                ")],1),s("Row",[s("Col",{attrs:{span:"12"}},[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("消息推送")]),s("Form",{attrs:{"label-width":120}},[s("FormItem",{attrs:{label:"webhook地址:"}},[s("Input",{attrs:{placeholder:"支持钉钉/企业微信(赞助版本) webhook机器人"},model:{value:t.message.web_hook,callback:function(e){t.$set(t.message,"web_hook",e)},expression:"message.web_hook"}})],1),s("FormItem",{attrs:{label:"邮件SMTP服务地址:"}},[s("Input",{attrs:{placeholder:"STMP服务 地址"},model:{value:t.message.host,callback:function(e){t.$set(t.message,"host",e)},expression:"message.host"}})],1),s("FormItem",[s("Checkbox",{model:{value:t.message.ssl,callback:function(e){t.$set(t.message,"ssl",e)},expression:"message.ssl"}},[t._v("启用ssl端口")])],1),s("FormItem",{attrs:{label:"SMTP服务端口:"}},[s("InputNumber",{model:{value:t.message.port,callback:function(e){t.$set(t.message,"port",e)},expression:"message.port"}})],1),s("FormItem",{attrs:{label:"邮件推送人用户名:"}},[s("Input",{attrs:{placeholder:"推送人 用户名"},model:{value:t.message.user,callback:function(e){t.$set(t.message,"user",e)},expression:"message.user"}})],1),s("FormItem",{attrs:{label:"邮件推送人密码:"}},[s("Input",{attrs:{placeholder:"推送人 密码",type:"password"},model:{value:t.message.password,callback:function(e){t.$set(t.message,"password",e)},expression:"message.password"}})],1),s("FormItem",{attrs:{label:"邮件测试收件地址::"}},[s("Input",{attrs:{placeholder:"测试收件人地址填写"},model:{value:t.message.to_user,callback:function(e){t.$set(t.message,"to_user",e)},expression:"message.to_user"}})],1),s("Form-item",{attrs:{label:"email推送开关:"}},[s("i-switch",{attrs:{size:"large"},model:{value:t.message.mail,callback:function(e){t.$set(t.message,"mail",e)},expression:"message.mail"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1),s("Form-item",{attrs:{label:"webhook推送开关:"}},[s("i-switch",{attrs:{size:"large"},model:{value:t.message.ding,callback:function(e){t.$set(t.message,"ding",e)},expression:"message.ding"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1),s("Button",{attrs:{type:"primary"},on:{click:function(e){return t.message_test("ding")}}},[t._v("hook测试")]),s("Button",{staticStyle:{"margin-left":"5%"},attrs:{type:"warning"},on:{click:function(e){return t.message_test("mail")}}},[t._v("邮件测试")])],1)],1)],1),s("Col",{attrs:{span:"12"}},[s("Card",{staticStyle:{"margin-left":"5%"}},[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("LDAP设置")]),s("Form",{attrs:{"label-width":120}},[s("FormItem",{attrs:{label:"服务地址url"}},[s("Input",{attrs:{placeholder:"[ip地址或者域名]:[端口号]"},model:{value:t.ldap.url,callback:function(e){t.$set(t.ldap,"url",e)},expression:"ldap.url"}})],1),s("FormItem",[s("Checkbox",{model:{value:t.ldap.ldaps,callback:function(e){t.$set(t.ldap,"ldaps",e)},expression:"ldap.ldaps"}},[t._v("启用ldaps")])],1),s("FormItem",{attrs:{label:"LDAP管理员DN:"}},[s("Input",{attrs:{placeholder:"请填写管理员DN"},model:{value:t.ldap.user,callback:function(e){t.$set(t.ldap,"user",e)},expression:"ldap.user"}})],1),s("FormItem",{attrs:{label:"LDAP管理员密码:"}},[s("Input",{attrs:{placeholder:"请填写管理员密码",type:"password"},model:{value:t.ldap.password,callback:function(e){t.$set(t.ldap,"password",e)},expression:"ldap.password"}})],1),s("FormItem",{attrs:{label:"LDAP_Search filter:"}},[s("Select",{model:{value:t.ldap.type,callback:function(e){t.$set(t.ldap,"type",e)},expression:"ldap.type"}},[s("Option",{attrs:{value:1}},[t._v("sAMAccountName")]),s("Option",{attrs:{value:2}},[t._v("uid")]),s("Option",{attrs:{value:3}},[t._v("cn")])],1)],1),s("FormItem",{attrs:{label:"LDAP_SCBASE:"}},[s("Input",{attrs:{placeholder:"LDAP Search Base"},model:{value:t.ldap.sc,callback:function(e){t.$set(t.ldap,"sc",e)},expression:"ldap.sc"}})],1),s("Button",{attrs:{type:"primary"},on:{click:function(e){return t.ldap_test()}}},[t._v("ldap测试")])],1)],1),s("br"),s("Alert",{staticStyle:{"margin-left":"5%"},attrs:{type:"info","show-icon":""}},[t._v("\n                            注意事项：\n                            "),s("template",{slot:"desc"},[t._v("\n                                1.LDAP登录用户名，必须全局唯一。ldap配置请参考Grafana。\n                                "),s("br"),t._v("\n                                2.由于各个邮件服务提供商对于垃圾邮件过滤的机制各不相同，可能会造成邮件无法接收的情况。所以使用前请测试是否稳定。对于使用了ssl安全协议的stmp连接需勾选启动ssl端口复选框\n                                "),s("br"),t._v("\n                                3.只有开启相应的消息推送开关后，消息推送才会开启。\n                                "),s("br")])],2)],1)],1)],1)],1)],1),s("br"),s("Row",[s("Col",{attrs:{span:"24"}},[s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"android-settings"}}),t._v("\n                    进阶设置\n                ")],1),s("Row",[s("Col",{attrs:{span:"12"}},[s("Card",{staticStyle:{"margin-left":"5%"}},[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("其他")]),s("Form",{attrs:{"label-width":120}},[s("FormItem",{attrs:{label:"查询最大Limit限制:"}},[s("Input",{attrs:{placeholder:"查询最大的Limit数。"},model:{value:t.other.limit,callback:function(e){t.$set(t.other,"limit",e)},expression:"other.limit"}})],1),s("FormItem",{attrs:{label:"自定义环境:"}},[t._l(t.other.idc,(function(e){return s("Tag",{key:e,attrs:{name:e,type:"border",closable:"",color:"blue"},on:{"on-close":t.handleClose2}},[t._v(t._s(e)+"\n                                    ")])})),s("br"),s("Input",{staticStyle:{width:"30%"},attrs:{placeholder:"环境名称"},model:{value:t.other.foce,callback:function(e){t.$set(t.other,"foce",e)},expression:"other.foce"}}),s("Button",{staticClass:"margin-left-10",attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:t.handleAdd}},[t._v("\n                                        添加环境\n                                    ")])],2),s("FormItem",{attrs:{label:"排除数据库:"}},[t._l(t.other.exclude_db_list,(function(e){return s("Tag",{key:e,attrs:{name:e,type:"border",closable:"",color:"blue"},on:{"on-close":t.handleClose_exclued_db}},[t._v(t._s(e)+"\n                                    ")])})),s("br"),s("Input",{staticStyle:{width:"30%"},attrs:{placeholder:"排除数据库"},model:{value:t.other.exclued_db,callback:function(e){t.$set(t.other,"exclued_db",e)},expression:"other.exclued_db"}}),s("Button",{staticClass:"margin-left-10",attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:t.handleAdd_exclued_db}},[t._v("添加排除数据库\n                                    ")])],2),s("FormItem",{attrs:{label:"脱敏字段:"}},[t._l(t.other.insulate_word_list,(function(e){return s("Tag",{key:e,attrs:{name:e,type:"border",closable:"",color:"blue"},on:{"on-close":t.handleClose3}},[t._v(t._s(e)+"\n                                    ")])})),s("br"),s("Input",{staticStyle:{width:"30%"},attrs:{placeholder:"脱敏字段设置"},model:{value:t.other.sensitive,callback:function(e){t.$set(t.other,"sensitive",e)},expression:"other.sensitive"}}),s("Button",{staticClass:"margin-left-10",attrs:{icon:"ios-plus-empty",type:"dashed",size:"small"},on:{click:t.handleAdd1}},[t._v("\n                                        添加脱敏字段\n                                    ")])],2),s("Row",[s("Col",{attrs:{span:"6"}},[s("Form-item",{attrs:{label:"查询审核:"}},[s("i-switch",{attrs:{size:"large"},model:{value:t.other.query,callback:function(e){t.$set(t.other,"query",e)},expression:"other.query"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1),s("Col",{attrs:{span:"6"}},[s("Form-item",{attrs:{label:"允许注册:"}},[s("i-switch",{attrs:{size:"large"},model:{value:t.other.register,callback:function(e){t.$set(t.other,"register",e)},expression:"other.register"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1)],1),s("Row",[s("Col",{attrs:{span:"6"}},[s("Form-item",{attrs:{label:"查询导出:"}},[s("i-switch",{attrs:{size:"large"},model:{value:t.other.export,callback:function(e){t.$set(t.other,"export",e)},expression:"other.export"}},[s("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),s("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])])],1)],1),s("Col",{attrs:{span:"6"}},[s("Form-item",{attrs:{label:"查询时限:"}},[s("InputNumber",{attrs:{max:600,min:0,formatter:function(t){return t+"分钟"}},model:{value:t.other.ex_query_time,callback:function(e){t.$set(t.other,"ex_query_time",e)},expression:"other.ex_query_time"}})],1)],1)],1)],1)],1)],1),s("Col",{attrs:{span:"12"}},[s("Row",[s("Card",{staticStyle:{"margin-left":"5%"}},[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("超级管理员特权")]),s("Form",{attrs:{"label-width":160}},[s("FormItem",{attrs:{label:"删除指定日期前的工单记录"}},[s("DatePicker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择时间点",editable:!1},on:{"on-change":function(e){t.other.overdue=e}},model:{value:t.other.overdue,callback:function(e){t.$set(t.other,"overdue",e)},expression:"other.overdue"}}),s("Poptip",{attrs:{confirm:"",title:"确定要删除工单记录吗?"},on:{"on-ok":t.del_order}},[s("Button",{staticStyle:{"margin-left":"10%"},attrs:{type:"primary"}},[t._v("删除")])],1)],1),s("FormItem",{attrs:{label:"删除指定日期前的查询记录"}},[s("DatePicker",{attrs:{format:"yyyy-MM-dd HH:mm",type:"datetime",placeholder:"选择时间点",editable:!1},on:{"on-change":function(e){t.other.query_expire=e}},model:{value:t.other.query_expire,callback:function(e){t.$set(t.other,"query_expire",e)},expression:"other.query_expire"}}),s("Poptip",{attrs:{confirm:"",title:"确定要删除查询记录吗?"},on:{"on-ok":t.del_query}},[s("Button",{staticStyle:{"margin-left":"10%"},attrs:{type:"primary"}},[t._v("删除")])],1)],1)],1)],1)],1),s("br"),s("Alert",{staticStyle:{"margin-left":"5%"},attrs:{type:"warning","show-icon":""}},[t._v("\n                            注意事项：\n                            "),s("template",{slot:"desc"},[t._v("\n                                1.设置最大Limit数后，所有的查询语句的查询结果都不会超过这个数值。\n                                "),s("br"),t._v("\n                                2.查询审核开关开启后，所有的查询都必须通过管理员同意才能进行。关闭则可自主查询\n                                "),s("br"),t._v("\n                                3.设置脱敏字段后，查询时如匹配到对应字段则该字段将只会以******显示\n                            ")])],2),s("Button",{staticStyle:{"margin-left":"5%",width:"95%"},attrs:{type:"primary"},on:{click:t.save_upload}},[t._v("保存")])],1)],1)],1)],1)],1)],1)},r=[],o=(s("ac6a"),s("ac4d"),s("8a81"),s("5df3"),s("1c4c"),s("7f7f"),s("6b54"),s("2397"),s("d225")),l=s("b0b4"),n=s("4e2b"),i=s("308d"),c=s("6bb5"),u=s("9ab4"),d=s("60a3"),p=s("028f");function h(t,e){var s;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(s=m(t))||e&&t&&"number"===typeof t.length){s&&(t=s);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,n=!1;return{s:function(){s=t[Symbol.iterator]()},n:function(){var t=s.next();return l=t.done,t},e:function(t){n=!0,o=t},f:function(){try{l||null==s.return||s.return()}finally{if(n)throw o}}}}function m(t,e){if(t){if("string"===typeof t)return f(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);return"Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s?Array.from(t):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}function v(t){var e=b();return function(){var s,a=Object(c["a"])(t);if(e){var r=Object(c["a"])(this).constructor;s=Reflect.construct(a,arguments,r)}else s=a.apply(this,arguments);return Object(i["a"])(this,s)}}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var _=function(t){Object(n["a"])(s,t);var e=v(s);function s(){var t;return Object(o["a"])(this,s),t=e.apply(this,arguments),t.ldap={},t.message={push_type:!1},t.other={limit:0,per_order:0},t}return Object(l["a"])(s,[{key:"del_order",value:function(){var t=this;this.$http.post("".concat(this.$config.url,"/group/setting/del/order"),{date:this.other.overdue}).then((function(e){return t.$config.notice(e.data)})).catch((function(e){return t.$config.err_notice(t,e)}))}},{key:"del_query",value:function(){var t=this;this.$http.post("".concat(this.$config.url,"/group/setting/del/query"),{date:this.other.query_expire}).then((function(e){return t.$config.notice(e.data)})).catch((function(e){return t.$config.err_notice(t,e)}))}},{key:"handleAdd",value:function(){var t,e=h(this.other.idc);try{for(e.s();!(t=e.n()).done;){var s=t.value;if(s===this.other.foce)return void this.$Message.error("请勿添加相同环境！")}}catch(a){e.e(a)}finally{e.f()}this.other.idc.push(this.other.foce),this.other.foce=""}},{key:"handleAdd1",value:function(){var t,e=h(this.other.insulate_word_list);try{for(e.s();!(t=e.n()).done;){var s=t.value;if(s===this.other.sensitive)return void this.$Message.error("请勿添加相同脱敏字段！")}}catch(a){e.e(a)}finally{e.f()}this.other.insulate_word_list.push(this.other.sensitive),this.other.sensitive=""}},{key:"handleAdd_exclued_db",value:function(){var t,e=h(this.other.exclude_db_list);try{for(e.s();!(t=e.n()).done;){var s=t.value;if(s===this.other.exclued_db)return void this.$Message.error("请勿添加相同数据库！")}}catch(a){e.e(a)}finally{e.f()}this.other.exclude_db_list.push(this.other.exclued_db),this.other.exclued_db=""}},{key:"handleClose2",value:function(t,e){var s=this.other.idc.indexOf(e);this.other.idc.splice(s,1)}},{key:"handleClose3",value:function(t,e){var s=this.other.insulate_word_list.indexOf(e);this.other.insulate_word_list.splice(s,1)}},{key:"handleClose_exclued_db",value:function(t,e){var s=this.other.exclude_db_list.indexOf(e);this.other.exclude_db_list.splice(s,1)}},{key:"ldap_test",value:function(){var t=this;this.$http.put("".concat(this.$config.url,"/group/setting/test/ldap"),{ldap:this.ldap}).then((function(e){t.$config.notice(e.data)})).catch((function(e){t.$config.err_notice(t,e)}))}},{key:"message_test",value:function(t){var e=this;this.$http.put("".concat(this.$config.url,"/group/setting/test/").concat(t),{mail:this.message}).then((function(t){e.$config.notice(t.data)})).catch((function(t){e.$config.err_notice(e,t)}))}},{key:"save_upload",value:function(){var t=this;this.$http.post("".concat(this.$config.url,"/group/setting/add"),{ldap:this.ldap,message:this.message,other:this.other}).then((function(e){t.$config.notice(e.data)})).catch((function(e){t.$config.err_notice(t,e)}))}},{key:"mounted",value:function(){var t=this;this.$http.get("".concat(this.$config.url,"/group/setting")).then((function(e){t.message=e.data.Message,t.other=e.data.Other,t.ldap=e.data.Ldap})).catch((function(e){t.$config.err_notice(t,e)}))}}]),s}(Object(d["b"])(p["a"]));_=Object(u["a"])([d["a"]],_);var y=_,g=y,k=(s("c64d"),s("2877")),x=Object(k["a"])(g,a,r,!1,null,null,null);e["default"]=x.exports},ec55:function(t,e,s){}}]);
//# sourceMappingURL=chunk-3983a0a4.3bb53513.js.map