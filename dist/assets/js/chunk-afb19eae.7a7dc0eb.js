(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-afb19eae"],{"17d8":function(t,e,a){"use strict";a("4373")},4373:function(t,e,a){},"4ff6":function(t,e,a){"use strict";a("6b54"),a("2397");var r=a("d225"),c=a("b0b4"),n=a("4e2b"),i=a("308d"),o=a("6bb5"),s=a("9ab4"),u=a("60a3"),f=a("028f"),l=a("6148");function h(t){var e=d();return function(){var a,r=Object(o["a"])(t);if(e){var c=Object(o["a"])(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return Object(i["a"])(this,a)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var p=function(t){Object(n["a"])(a,t);var e=h(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.fetchData={idc:[],source:[],base:[],table:[],assigned:[]},t}return Object(c["a"])(a,[{key:"fetchSource",value:function(t,e){var a=this;t&&this.$http.get("".concat(this.$config.url,"/fetch/source?idc=").concat(t,"&xxx=").concat(e)).then((function(t){t.data.x===e?(a.fetchData.source=t.data.source,a.fetchData.assigned=t.data.assigned):a.$config.notice("非法劫持参数！")})).catch((function(t){a.$config.err_notice(a,t)}))}},{key:"fetchBase",value:function(t){var e=this;t&&this.$http.get("".concat(this.$config.url,"/fetch/base?source=").concat(t)).then((function(t){e.fetchData.base=t.data.results,e.fetchData.assigned=t.data.admin,l["a"].changed_wordList(e.$config.concat(e.wordList,t.data.highlight))})).catch((function(t){e.$config.err_notice(e,t)}))}},{key:"fetchTable",value:function(){var t=this;this.formItem.data_base&&this.$http.put("".concat(this.$config.url,"/fetch/table"),{source:this.formItem.source,base:this.formItem.data_base}).then((function(e){t.fetchData.table=e.data.table,l["a"].changed_wordList(t.$config.concat(t.wordList,e.data.highlight))})).catch((function(e){t.$config.err_notice(t,e)}))}},{key:"fetchIDC",value:function(){var t=this;this.$http.get("".concat(this.$config.url,"/fetch/idc")).then((function(e){t.fetchData.idc=e.data})).catch((function(e){t.$config.err_notice(t,e)}))}}]),a}(Object(u["b"])(f["a"]));p=Object(s["a"])([Object(u["a"])({components:{}})],p),e["a"]=p},"9cf0":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",[a("Card",[a("div",{staticClass:"step-header-con"},[a("h3",[t._v(t._s(t.stepData.title))]),a("h5",[t._v(t._s(t.stepData.describe))])]),a("p",{staticClass:"step-content"}),a("Row",[a("i-col",{attrs:{span:"8"}},[a("Alert",{attrs:{type:"warning","show-icon":""}},[t._v("\n                        注意事项:\n                        "),a("span",{attrs:{slot:"desc"},slot:"desc"},[t._v("\n          1.必须填写查询说明\n          "),a("br"),t._v("\n          2.根据查询条件预估所需的查询时间\n          "),a("br"),t._v("\n          3.所有提交的查询语句均会进行审计记录\n          "),a("br"),t._v("\n          4.仅支持查询语句,不可使用非查询语句\n          "),a("br"),t._v("\n          5.已限制最大limit数，如自己输入的limit数大于平台配置的最大limit数则以平台配置的Limit数为准\n        ")])])],1),a("i-col",{attrs:{span:"12"}},[a("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.stepRules,"label-width":150}},[a("FormItem",{attrs:{label:"环境:",prop:"idc"}},[a("Select",{on:{"on-change":t.fetchDiffSource},model:{value:t.formItem.idc,callback:function(e){t.$set(t.formItem,"idc",e)},expression:"formItem.idc"}},t._l(t.fetchData.idc,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("FormItem",{attrs:{label:"审核人:",prop:"assigned"}},[a("Select",{attrs:{filterable:""},model:{value:t.formItem.assigned,callback:function(e){t.$set(t.formItem,"assigned",e)},expression:"formItem.assigned"}},t._l(t.fetchData.assigned,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),t.export_list?a("FormItem",{attrs:{label:"是否需要导出数据:",prop:"export"}},[a("RadioGroup",{model:{value:t.formItem.export,callback:function(e){t.$set(t.formItem,"export",e)},expression:"formItem.export"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1):t._e(),a("FormItem",{attrs:{label:"查询说明：",prop:"text"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请填写查询说明"},model:{value:t.formItem.text,callback:function(e){t.$set(t.formItem,"text",e)},expression:"formItem.text"}})],1),a("FormItem",{attrs:{label:""}},[a("Button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1)],1)],1),a("Steps",t._l(t.stepList1,(function(t){return a("Step",{key:t.title,attrs:{title:t.title,content:t.describe}})})),1)],1)],1)],1)},c=[],n=(a("6b54"),a("2397"),a("d225")),i=a("b0b4"),o=a("4e2b"),s=a("308d"),u=a("6bb5"),f=a("9ab4"),l=a("4ff6"),h=a("60a3"),d=a("6148");function p(t){var e=m();return function(){var a,r=Object(u["a"])(t);if(e){var c=Object(u["a"])(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return Object(s["a"])(this,a)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var b=function(t){Object(o["a"])(a,t);var e=p(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.export_list=!1,t.stepData={title:"Yearning SQL查询系统",describe:"欢迎你！ ".concat(sessionStorage.getItem("user"))},t.stepList1=[{title:"提交",describe:"提交查询申请"},{title:"审核",describe:"等待审核结果"},{title:"查询",describe:"审核完毕，进入查询页面"}],t.stepRules={text:[{required:!0,message:"请填写查询说明",trigger:"blur"}],idc:[{required:!0,message:"环境地址不得为空",trigger:"change"}],source:[{required:!0,message:"连接名不得为空",trigger:"change"}],assigned:[{required:!0,message:"审核人不得为空",trigger:"change"}]},t.item={},t}return Object(i["a"])(a,[{key:"fetchDiffSource",value:function(t){this.fetchSource(t,"query")}},{key:"handleSubmit",value:function(){var t=this,e=this.$refs["formItem"];e.validate((function(e){e&&t.$http.post("".concat(t.$config.url,"/query/refer"),{idc:t.formItem.idc,source:t.formItem.source,export:t.formItem.export,assigned:t.formItem.assigned,text:t.formItem.text}).then((function(){t.$router.push({name:"query_apply"})})).catch((function(e){t.$config.err_notice(t,e)}))}))}},{key:"fetchQueryStatus",value:function(){var t=this;this.$http.put("".concat(this.$config.url,"/query/status")).then((function(e){1===e.data.status?t.$router.push({name:"query_page"}):2===e.data.status?t.$router.push({name:"query_apply"}):(t.fetchIDC(),t.export_list=e.data.export)}))}},{key:"mounted",value:function(){this.fetchQueryStatus()}},{key:"destroyed",value:function(){d["a"].clear_order()}}]),a}(Object(h["b"])(l["a"]));b=Object(f["a"])([Object(h["a"])({components:{}})],b);var g=b,v=g,y=(a("17d8"),a("2877")),_=Object(y["a"])(v,r,c,!1,null,null,null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-afb19eae.7a7dc0eb.js.map